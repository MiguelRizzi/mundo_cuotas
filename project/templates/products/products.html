{% extends 'base.html' %}
{% load static %}

{% block header %}
<div class="px-4 py-5 text-center bg-header">
            
    <img src="{% static 'img/logo.png' %}" alt="Mundo Cuotas" width="95" class="d-block mx-auto">
    <h1 class="display-5 fw-bold text-body-emphasis brand">
        Comprá en cuotas solo con tu firma
    </h1>

    <div class="col-lg-6 mx-auto">
        <h2 class="lead fw-normal mb-4">Compra productos directo de fábrica en cuotas, sin complicaciones. Encuéntranos en Tandil, Ayacucho y Azul</h2>
    </div>
</div>
{% endblock header %}

{% block content %}
    <section 
        class="container py-5"
        hx-get="{% url 'products:load_product_list' %}"
        hx-target="#results"
        hx-trigger="load, productListChanged from:body"
    >
    
    <div class="row mt-2">
        
        <div class=" col-12 col-lg-9">
            <div id="results" class="row gx-3 row-cols-1 row-cols-md-2 row-cols-xl-3 justify-content-start">
                
            </div>
        </div>

        <div class="col-12 col-lg-3">

            <div class="flex-shrink-0 p-3 card">
                <div class="d-flex align-items-center pb-3 mb-3 border-bottom fs-5">
                    <i class="bi bi-filter fs-5 fw-semibold me-2"></i>
                    <span cass="fs-5 fw-semibold">Filtrar Productos</span>
                </div>
        
              
                <form hx-get="{% url 'products:load_product_list' %}" hx-target="#results" hx-trigger="change from:input, productListChanged from:body, submit" method="get" class="p-3">
        
                    <div class="input-group">
                        <input name="consult" class="form-control" type="text" placeholder="Buscar..." />
                        <button class="btn btn-success" id="button-search" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
        
                    <div class="row">
                        <div class="col-6">
                    
                            <div class="form-group fs-6">
                                <p class="mt-3 mb-2 fw-semibold border-bottom">Tipo</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="type" value="4" id="type1">
                                    <label class="form-check-label" for="type1">Todos</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="type" value="2" id="type2">
                                    <label class="form-check-label" for="type2">Destacado</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="type" value="3" id="type3">
                                    <label class="form-check-label" for="type3">Oferta</label>
                                </div>
                            </div>
                    
                            <div class="form-group fs-6">
                                <p class="mt-3 mb-2 fw-semibold border-bottom">Orden</p>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="date" onclick="onlyOneDate(this)" value="1" id="date1">
                                    <label class="form-check-label" for="date1">Recientes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="date" onclick="onlyOneDate(this)" value="2" id="date2">
                                    <label class="form-check-label" for="date2">Antiguos</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group fs-6">
                                <p class="mt-3 mb-2 fw-semibold border-bottom">Categorías</p>
                                {% for category in categories %}
                                    {% if not category.parent %}
                                        <div class="mb-1">
                                            <button type="button" class="btn px-2 btn-toggle d-inline-flex rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#{{ category.slug }}" aria-expanded="false" onclick="collapseOthers(this)">
                                                {{ category.name }}
                                            </button>
                    
                                            <div class="collapse" id="{{ category.slug }}">
                                                <div class="btn-toggle-nav list-unstyled fw-normal pb-1 small mx-4">
                                                    {% for subcategory in category.subcategories.all %}
                                                        <div class="form-check">
                                                            <input type="checkbox" class="form-check-input" id="{{ subcategory.slug }}" name="category" value="{{ subcategory.slug }}">
                                                            <label class="form-check-label" for="{{ subcategory.slug }}">{{ subcategory }}</label>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div> 
                </form>
        
              </div>

        </div>




    </section>




  
    
    
{% endblock content %}

{% block footer %}
    {% include 'components/contact_footer.html' %}
{% endblock footer %}